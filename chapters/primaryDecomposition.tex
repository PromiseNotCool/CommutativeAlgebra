\chapter{Primary Decomposition}

\begin{discussion}
    UFD's have prime factorization. In fact, it is ``if and only if''. Aternative version for non-UFD's.
    \begin{enumerate}
        \item irreducible factorization: 
            \[
                \begin{array}{ll}
                    \text{\underline{pros}} & \text{\underline{cons}} \\
                    \text{familiar} & \text{don't necessarily exist} 
                \end{array}.
            \]
        \item 
            primary decomposition:
            \[
                \begin{array}{ll}
                    \text{\underline{pros}} & \text{\underline{cons}} \\
                    \text{exists, e.g., if $R$ is noetherian,} & \text{reduce factorization of elements} \\
                \text{there exists more general than} & \text{with intersection of nice ideal}\\
                \text{just for principal ideal}
                \end{array}.
            \]
    \end{enumerate}
\end{discussion}

\begin{theorem}
    Let $R$ be a noetherian integral domain. Let $a \in R \setminus \{R^{\times} \cup 0\}$.
    \begin{enumerate}
        \item $a$ has an irreducible factorization in $R$.
        \item There exist irreducible $b_1,\cdots,b_n \in R$ such that $a = b_1 \cdots b_n$.
    \end{enumerate}
\end{theorem}

\begin{proof}
    \begin{enumerate}
        \item Let $\Sigma = \{\langle b \rangle \neq R : b \mid a\} \ni \langle a \rangle$. Since $R$ is noetherian, $\Sigma$ has a maximal element $\langle b \rangle$. Claim. $\langle b \rangle$ is irreducible. Note $b \neq 0$ since $a \neq 0$ and $b \mid a$, and $b \not \in R^{\times}$ since $\langle b \rangle \neq R$. Suppose $b = cd$ for some $c,d \in R \setminus R^{\times}$. Since $c \mid b \mid a$, we have $c \mid a$. Also, since $c \not \in R^{\times}$, $c \in \Sigma$. Since $\langle b \rangle \subseteq \langle c \rangle \subseteq R$, $\langle b \rangle$ is maximal and $c \not \in R^{\times}$, $\langle cd \rangle = \langle b \rangle = \langle c \rangle$. Since $R$ is an integral domain, $d \in R^{\times}$, a contradiction.
        \item \qedhere
    \end{enumerate}
\end{proof}

\begin{definition}
    If $R$ satisfies the conclusion of Theorem 4.2(b), then $R$ is \emph {atomic}.
\end{definition}

\begin{example}
    $\bbZ_6$: $3^{2} = 3$, $2^{2} = 4$, $2^{3} = 2$.
\end{example}

\begin{lemma}[Nakayamas Lemma]
    Let $I,J \leq R$ such that $I \subseteq \operatorname{Jac}(R)$ and $J$ is finitely generated. If $J = IJ$, then $J = 0$.
\end{lemma}

\begin{proof}
\end{proof}

\begin{lemma}
    Let $(R,\ffm)$ be local and $0 \neq b = cd$ with $b,c,d \in R$ such that $\langle b \rangle = \langle c \rangle$. Then $d \in R^{\times}$.
\end{lemma}

\begin{proof}
\end{proof}

\begin{theorem}
    Let $(R,\ffm)$ be local, noetherian, and $a \in R \setminus \{R^{\times} \cup 0\}$. 
    \begin{enumerate}
        \item $a$ has an irreducible factor in $R$.
        \item $a = b_1 \cdots b_n$ for some irreducible elements $b_1,\cdots,b_n \in R$.
    \end{enumerate}
\end{theorem}

\begin{proof}
\end{proof}

\begin{discussion}
    Let $R$ be noetherian (local or domain) and $a \in R \setminus \{R^{\times} \cup 0\}$ with irreducible factorization. ...
\end{discussion}

\begin{example}
\end{example}

\begin{definition}
    An ideal $\ffq \lneq R$ is \emph{primary} if $xy \in \ffq$ with $x,y \in R$, then $x \in \operatorname{rad}(\ffq)$ or $y \in \operatorname{rad}(\ffq)$, i.e., if $\overbar{x} \overbar{y} = 0$ with $\overbar{x}, \overbar{y} \in R/\ffq$, then $\overbar{x} \in \operatorname{Nil}(R/\ffq)$ or $\overbar{y} \in \operatorname{Nil}(R/\ffq)$. 
\end{definition}

\begin{example}
    \begin{enumerate}
        \item 
        \item
        \item 
        \item 
    \end{enumerate}
\end{example}

\begin{proof}
    \begin{enumerate}
        \item [(b)]
        \item [(c)]
        \item [(d)]
    \end{enumerate}
\end{proof}

\begin{example}
    \begin{enumerate}
        \item If $R$ is a UFD and $p \in R$ is prime, then $\langle p^{n} \rangle$ is primary.
        \item If $x \in R$ is irreducible, $\langle x \rangle$ may not be primary.
        \item Let $R = k[X_1,\cdots,X_d]$. Then $I = \langle X_{i_1}^{e_1}, \cdots ,X_{i_n}^{e_n} \rangle$ with $e_i \geq 1$ for $i = 1,\cdots,n$ and $J = \langle X_{1}^{e_1},\cdots,X_d^{e_d},f_1,\cdots,f_n \rangle \lneq R$ both are primary....
        \item Let $R = k[X,Y,Z]$. Then neither of $\langle X^{2},XY\rangle$ and $\langle \rangle$.
    \end{enumerate}
\end{example}

\begin{proof}
    \begin{enumerate}
        \item 
            Let $x,y \in R$ such that $xy \in \langle p^{n} \rangle$. If $y \in \operatorname{rad}(\langle p^{n} \rangle) = \langle p \rangle$, then done. \par 
            Assume $y \not \in \langle p \rangle$. Then $p \nmid y$. Since $xy \in \langle p^{n} \rangle$, $p^{n} \mid xy$. Since $xy$ has a unique factorization, $p$ is irreducible and $p \nmid y$, we have $p^{n} \mid x$. So $x \in \langle p^{n} \rangle$.
        \item Let $R = \frac{k\llbracket X,Y,Z \rrbracket}{\langle X^{2}-YZ \rangle}$ and $x := \overbar{X} \in R$. Then $x$ is irreducible...
        
    \end{enumerate}
\end{proof}

\begin{definition}
    $\ffa \leq R$ is \emph{reducible} if $\ffa \neq R$ and there exist $I,J \leq R$ such that $\ffa = I \cap J$ and $I \neq \ffa \neq J$. \par 
    $\ffa \leq R$ is \emph{irreducible} if it is not reducible, i.e., for $I,J \leq R$, if $\ffa = I \cap J$, then $\ffa = I$ or $\ffa = J$.
\end{definition}

\begin{example}
\end{example}

\begin{proposition}
    Let $R$ be noetherian If $\ffa \leq R$ is irreducible, then $\ffa$ is primary.
\end{proposition}

\begin{definition}
    Let $\ffa \lneq R$. A \emph{primary decomposition} of $\ffa$ is $\ffa = \bigcap_{i=1}^{n} J_i$ such that $\ffa = \bigcap_{i=1}^{n}$ with $J_i$ is primary for $i = 1,\cdots,n$.
\end{definition}

\begin{theorem}[Noether]
    Assume $R$ is noetherian and $\ffa \lneq R$. Then $\ffa$ has a primary decomposition.
\end{theorem}

\begin{proposition}
    If $\ffq \lneq R$ is primary, then $\operatorname{rad}(\ffq) \in \operatorname{Spec}(R)$. In particular, $\operatorname{rad}(\ffq)$ is the unique smallest prime ideal of $R$ containing $\ffq$.
\end{proposition}

\begin{proof}
    Since $\ffq \neq R$, $\operatorname{rad}(\ffq) \neq R$. Let $x,y \in R$ such that $xy \in \operatorname{rad}(\ffq)$. Then $x^{m}y^{m} = (xy)^{m} \in \ffq$ for some $m \geq 1$. Since $\ffq$ is primary, $x^{m} \in \operatorname{rad}(\ffq)$ or $y^{m} \in \operatorname{rad}(\ffq)$. So $x \in \operatorname{rad}(\operatorname{rad}(\ffq)) = \operatorname{rad}(\ffq)$ or $y \in \operatorname{rad}(\ffq)$.
\end{proof}

\begin{definition}
    If $\ffq \lneq R$ is primary and $\ffp = \operatorname{rad}(\ffq)$, then $\ffq$ is $\ffp$-\emph{primary}.
\end{definition}

\begin{example}
    \begin{enumerate}
        \item Let $\ffp \in \bbZ$ be prime. Then $\ffq = \langle  p^{n} \rangle$ is primary for $n \geq 1$ and $\operatorname{rad}(\ffq) = \langle p  \rangle \in \operatorname{Spec}(\bbZ)$. 
        \item 
            If $\ffm \in \operatorname{m-Spec}(R)$ and $\ffm^{n} \subseteq \ffp \subseteq \ffm$, then $\operatorname{rad}(\ffq) = \ffm \in \operatorname{Spec}(R)$.
        \item Let $R = k[X_1,\cdots,X_n]$ and $\ffq = \langle X_{i_1}^{e_{1}},\cdots,X_{i_n}^{e_{n}} \rangle$ with $e_i \geq 1$ for $i=1,\cdots,n$, then $\operatorname{rad}(\ffq) = \langle X_{i_1},\cdots,X_{i_n} \rangle \in \operatorname{Spec}(R)$.
    \end{enumerate}
\end{example}

\begin{proof}

\end{proof}

\begin{proposition}
    Let $\ffq_1,\cdots,\ffq_n \lneq R$ be $\ffp$-primary. Then $\bigcap_{i=1}^{n} \ffq_i$ is $\ffp$-primary.
\end{proposition}

\begin{proof}
    Induct on $n$. The base case $n = 2$ is the important case....
\end{proof}

\begin{definition}
    A primary decomposition $\ffa = \bigcap_{i=1}^{n}\ffq_i$ is \emph{minimal} if 
    \begin{enumerate}
        \item $\operatorname{rad}(\ffq_i) \neq \operatorname{rad}(\ffq_j)$ for $1 \leq i,j \leq n$ with $i \neq j$,
        \item 
    \end{enumerate}
\end{definition}

\begin{example}
    \begin{enumerate}
        \item 
        \item 
    \end{enumerate}
\end{example}

\begin{remark}
    Notice: minimal primary decomposition is not necessarily unique up to re-ordering.
\end{remark}

\begin{definition}
    Let $\ffa = \bigcap_{i=1}^{n} \ffq_i$ be minimal primary decomposition such that $\operatorname{rad}(\ffq_i) = \ffp_i$ for $i = 1,\cdots,n$.
    \begin{enumerate}
        \item The \emph{associated primes} of $\ffa$ are $\ffp_1,\cdots,\ffp_n$. Write it as $\operatorname{Ass}(\ffa) = \{\ffp_1,\cdots,\ffp_n\}$.
        \item The \emph{minimal primes} of $\ffa$ are the minimal elements of $\{\ffp_1,\cdots,\ffp_n\}$ w.r.t. $\subseteq$. Write it as $\operatorname{Min}(\ffa) = \operatorname{Min}\{\ffp_1,\cdots,\ffp_n\}$.
        \item 
        \item 
    \end{enumerate}
\end{definition}

\begin{proposition}
\end{proposition}

\begin{proof}
\end{proof}

\begin{proposition}
    Let $\ffa \lneq R$ with minimal primary decomposition $\ffa = \bigcap_{i=1}^{n} \ffq_i$ with $\ffp_i = \operatorname{rad}(\ffp_i)$ for $i = 1,\cdots,n$. Re-order the $\ffq_i$'s such that if necessary to assume without loss of generality, $\operatorname{Min}(\ffq) = \{\ffp_1,\cdots,\ffp_m\}$. Then the irreducible components of $\operatorname{V}(\ffa)$ are $\operatorname{V}(\ffp_1),\cdots,\operatorname{V}(\ffp_m)$.
\end{proposition}

\begin{proof}
\end{proof}

\begin{proposition}
    Let $\ffq \lneq R$ be $\ffp$-primary and $x \in R$. Then 
    \[
        (\ffq:x) = \left\{
            \begin{array}{ll}
                R &\text{if }x \in \ffq \\
                \ffq &\text{if }x \not \in \ffp \\
                \ffp\text{-primary} &\text{if }x \not \in \ffq \\
            \end{array}
        \right..
    \]
\end{proposition}
