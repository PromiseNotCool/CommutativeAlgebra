\chapter{Zariski Topology}

Let $R$ be a commutative ring with identity$\neq 0$. 

\begin{definition}
    For any $\epsilon > 0$ and any $x \in \bbR^n$, the \emph{open ball} centered at $x$ with radius $\epsilon$ is 
    \[B_\epsilon(x) = \{y \in \bbR^n \mathrel{\big |} \abs{x-y} < \epsilon\}.\]
    A subset $U \subseteq \bbR^n$ is \emph{open} if for any $x \in U$, there exists $\epsilon > 0$ such that $B_\epsilon(x) \subseteq U$, i.e., if $U$ is the union of (possible infinitely many) open balls. e.g., if $n = 1$, $B_\epsilon(x) = (x-\epsilon,x+\epsilon)$ is an open interval. \par 
    More generally, this works for any metric space.
\end{definition}

\begin{fact}
    $\bbR^n$ and $\emptyset$ are both open. \par 
    The set of open sets in $\bbR^n$ is closed under arbitrary union and finite intersection, i.e., if $U_\lambda$ is open for any $\lambda \in \Lambda$, then $\bigcup_{\lambda \in \Lambda} U_\lambda$ is open, and if $U_i$ open for any $i = 1,\cdots,d$, then $\bigcap_{i=1}^d U_i$ is open. \par 
    The set of open sets in $\bbR^n$ is (usually) not closed under infinite intersections. For example, $\bigcap_{i=1}^\infty (-1/i,1/i) = \{0\}$, not open in $\bbR^n$. 
\end{fact}

\begin{definition}
    A\emph{topology} on a non-empty set $X$ is a collection of sets $\ssT$ of subsets of $X$ ($\ssT \subseteq \llP(X)$) such that
    \begin{enumerate}
        \item $\emptyset, X \in \ssT$,
        \item for any $\{U_\lambda\}_{\lambda \in \Lambda} \subseteq \ssT$, $\bigcup_{\lambda \in \Lambda} U_\lambda \in \ssT$ and
        \item for any $n \geq 1$ and $U_1,\cdots,U_n \in \ssT$, $\bigcap_{i=1}^n U_\lambda \in \ssT$.
    \end{enumerate}
    \par The elements of $\ssT$ are the \emph{open subsets} of $X$. \par
    A \emph{topological space} is a set $X \neq \emptyset$ equipped with a topology $\ssT$.
\end{definition}

\begin{example}
    The \emph{Euclidean topology} on $\bbR^n$ is the topology on $\bbR^n$ from definition 2.1. More generally, this is the metric space topology.
\end{example}

\begin{definition}
    The \emph{Zariski topology} on $\operatorname{Spec}(R) = X$ ($R \neq 0$). The open sets are 
    \[\operatorname{Spec}(R) \setminus \operatorname{V}(S) = \{\ffp \in \operatorname{Spec}(R) \mid S \not \subseteq \ffp\}\] 
    where $S \subseteq R$. e.g., for any $f \in R$: $X_f = \operatorname{Spec}(R) \setminus \operatorname{V}(f) = \{\ffp \in \operatorname{Spec}(R) \mid f \not \in \ffp\}$.
\end{definition}

\begin{proposition}
    If $S \subseteq R$, then $\operatorname{V}(S) = \operatorname{V}(\langle S \rangle)$ and so $\operatorname{Spec}(R) \setminus \operatorname{V}(S) = \operatorname{Spec}(R) \setminus \operatorname{V}(\langle S \rangle)$. In other words, the open sets are exactly the sets $\operatorname{Spec}(R) \setminus \operatorname{V}(\ffa)$, where $\ffa \leq R$.
\end{proposition}

\begin{notation*}
    $\ssZ = \{\operatorname{Spec}(R) \setminus \operatorname{V}(S) \mid S \subseteq R\} = \{\operatorname{Spec}(R) \setminus \operatorname{V}(\ffa) \mid \ffa \leq R\}$.
\end{notation*}

\begin{example}
    Compute the Zariski open sets $\ssZ$ of $\operatorname{Spec}(\bbZ) = X$. Since $\bbZ$ is a principal ideal domain, $\ssZ = \{\operatorname{Spec}(\bbZ) \setminus \operatorname{V}(m) \mid m \geq 0\}$. Since $\operatorname{V}(0) = \operatorname{Spec}(\bbZ)$, $X_0 = \operatorname{Spec}(\bbZ) \setminus \operatorname{V}(0) = \emptyset$, and since $\operatorname{V}(1) = \emptyset$, $X_1 = \operatorname{Spec}(\bbZ) \setminus \operatorname{V}(1) = \operatorname{Spec}(\bbZ)$. For $m \geq 2$, write $m = p_1^{e_1} \cdots p_n^{e_n}$ with $p_1,\cdots,p_n$ are distinct primes and $e_1,\cdots,e_n \geq 1$, then $\operatorname{V}(m) = \{\langle p_1 \rangle, \cdots, \langle p_n \rangle\}$ and so $X_m = \operatorname{Spec}(\bbZ) \setminus \operatorname{V}(m) = X \setminus \{\langle p_1 \rangle,\cdots, \langle p_n \rangle\}$. Note these are all the open sets. In particular, $\ffp = \{0\}$ is in every non-empty open set.
\end{example}

\begin{fact}
    Let $X = \operatorname{Spec}(R)$. Then $X_0 = X \setminus \operatorname{V}(0) = \emptyset$ and $X_1 = X \setminus \operatorname{V}(1) = X$.
\end{fact}

\begin{proposition}
    In $X = \operatorname{Spec}(R)$, if $f_1,\cdots,f_n \in R$, then $X_{f_1} \cap \cdots \cap X_{f_n} = X_{f_1 \cdots f_n}$.
\end{proposition}

\begin{proof}
    $\ffp \in X_{f_1 \cdots f_n}$ if and only if $f_1 \cdots f_n \not \in \ffp$ if and only if $f_i \not \in \ffp$ for any $i = 1,\cdots,n$ if and only if $\ffp \in X_{f_i}$ for any $i = 1,\cdots,n$ if and only if $\ffp \in \bigcap_{i=1}^n X_{f_i}$.
\end{proof}

\begin{definition}
    If $X$ is a topological space, then a subset $Y \subseteq X$ is \emph{closed} if $X \setminus Y$ open, i.e., if and only if $Y = X \setminus U$ for some open subset $U \subseteq X$.
\end{definition}

\begin{example}
    In $\operatorname{Spec}(R) = X$, the closed sets are the sets of the form $\operatorname{V}(S) \subseteq \operatorname{Spec}(R)$ with $S \subseteq R$, i.e., the sets $\operatorname{V}(\ffa) \subseteq \operatorname{Spec}(R)$ such that $\ffa \leq R$.
\end{example}

\begin{proposition}
    Let $X$ be a non-empty set, $\ssY \subseteq \llP(X)$ and $\ssV = \{X \setminus Y \mid Y \in \ssY\}$. Then $\ssY$ is a topology on $X$ if and if only $\ssV$ satisfies the following.
    \begin{enumerate}
        \item $X,\emptyset \in \ssV$,
        \item closed under arbitrary intersections, i.e., for any $\{V_\lambda\}_{\lambda \in \Lambda} \subseteq \ssV$, then $\bigcap_{\lambda \in \Lambda} V_\lambda \in \ssV$,
        \item closed under fintie unions, i.e., for any $n \geq 1$ and $V_1,\cdots,V_n \in \ssV$, $\bigcup_{i=1}^n V_i \in \ssV$.
    \end{enumerate}
\end{proposition}

\begin{proof}
    It follows from $X \setminus \emptyset = \emptyset$, $X \setminus X = \emptyset$ and $\bigcap_{\lambda \in \Lambda} (X \setminus U_\lambda) = X \setminus (\bigcup_{\lambda \in \Lambda} U_\lambda)$.
\end{proof}

\begin{theorem}
    The Zariski topology on $\operatorname{Spec}(R) = X$ is a topology.
\end{theorem}

\begin{proof}
    Note $\ssZ = \{\operatorname{Spec}(R) \setminus \operatorname{V}(\ffa) \mid \ffa \leq R\} \subseteq X$. Let $\ssV = \{X \setminus Z \mid Z \in \ssZ\} = \{\operatorname{V}(\ffa) \mid \ffa \leq R\}$.
    \begin{enumerate}
        \item $X = \operatorname{V}(0) \in \ssV$ and $\emptyset = \operatorname{V}(1) \in \ssV$,
        \item For $\ffa_\lambda \leq \ffa$ for any $\lambda \in \Lambda$, $\bigcap_{\lambda \in \Lambda} \operatorname{V}(\ffa_\lambda) = \operatorname{V}(\sum_{\lambda \in \Lambda} \ffa_\lambda) \in \ssV$ by Fact 1.36.
        \item For any $n \geq 1$ and $\ffa_1,\cdots,\ffa_n \leq R$, $\bigcup_{i=1}^n \operatorname{V}(\ffa_i) = \operatorname{V}(\bigcap_{i=1}^n \ffa_i) \in \ssV$ by Proposition 1.39(a). \qedhere
    \end{enumerate}
    So by Proposition 2.12, the Zariski topology on $\operatorname{Spec}(R) = X$ is a topology.
\end{proof}

\begin{definition}
    A \emph{basis} for the topology $\ssT$ on a topological space $X$ is a subset $\llB \subseteq \ssT$ such that for any open set $U \subseteq X$ and any $u \in U$, there exists $B \subseteq \llB$ such that $u \in B \subseteq U$.
\end{definition}

\begin{example}
    In the Euclidean topology, $\llB = \{B_\epsilon(x) \mid x \in \bbR^n, \epsilon > 0\}$ is a basis.
\end{example}

\begin{theorem}
    In $X = \operatorname{Spec}(R)$, $\llB = \{X_f \mid f \in R\}$ is a basis for the Zariski topology.
\end{theorem}

\begin{proof}
    It suffices to show $X \setminus \operatorname{V}(S) = \bigcup_{s \in S}X_s$ for any $S \subseteq R$. Note $\ffp \in X \setminus \operatorname{V}(S)$ if and only if $S \not \subseteq \ffp$ if and only if there exists $s \in S$ such that $s \not \in \ffp$ if and only if there exists $s \in S$ such that $\ffp \in X_s$ if and only if $\ffp \in \bigcup_{s \in S}X_S$.
\end{proof}

\begin{proposition}
    If $R$ is noetherian, then for any open subset $U \subseteq X = \operatorname{Spec}(R)$, there exists $s_1,\cdots,s_n \in R$ such that $U = X_{s_1} \cup \cdots \cup X_{s_n}$, i.e., open sets are the finite union of the basis open sets.
\end{proposition}

\begin{proof}
    Wtite $U = X \setminus \operatorname{V}(\ffa)$ for some $\ffa \leq R$. Since $R$ is noetherian, $\ffa = \langle s_1,\cdots,s_n \rangle$ for some $s_1,\cdots,s_n \in \ffa$. Then $U = X \setminus \operatorname{V}(\langle s_1,\cdots,s_n \rangle) = X \setminus \operatorname{V}(s_1,\cdots,s_n) = \bigcup_{i=1}^n X_{s_i}$ by Theorem 2.16.
\end{proof}

\begin{definition}
    A topological space $X$ is \emph{quasi-compact} if ``every open cover of $X$ has a finite sub-cover'', i.e., for any $\{U_\lambda\}_{\lambda \in \Lambda} \subseteq \ssT$, if $X = \bigcup_{\lambda \in \Lambda} U_\lambda$, then there exist $\lambda_1,\cdots,\lambda_n \in \Lambda$ such that $X = \bigcup_{i=1}^n U_{\lambda_i}$.
\end{definition}

\begin{theorem}
    $\operatorname{Spec}(R)$ is quasi-compact.
\end{theorem}

\begin{proof}
    Since each open set $U_\lambda$ can be written as a union of $X_f$'s with $f \in R$, without loss of generality, assmue $X = \bigcup_{\lambda \in \Lambda} X_{f_\lambda} = X \setminus \operatorname{V}(\bigcup_{\lambda \in \Lambda}f_{\lambda})$ by Theorem 2.16. Then by Proposition 1.32(a), $\operatorname{V}(\langle \bigcup_{\lambda \in \Lambda}f_{\lambda} \rangle) = \operatorname{V}(\bigcup_{\lambda \in \Lambda}f_{\lambda}) = \emptyset$. So by Proposition 1.32(b), $\langle \bigcup_{\lambda \in \Lambda}f_{\lambda} \rangle = R \ni 1$. Then $1 = g_{\lambda_1} f_{\lambda_1} + \cdots + g_{\lambda_n}f_{\lambda_n}$ for some $n \in \bbN$, $\lambda_1,\cdots,\lambda_n \in \Lambda$ and $g_{\lambda_1},\cdots,g_{\lambda_n} \in R$. So $\langle f_{\lambda_1},\cdots,f_{\lambda_n} \rangle = R$. Then by Proposition 1.32(b), $\operatorname{V}(f_{\lambda_1},\cdots,f_{\lambda_n}) = \emptyset$. Thus, by Theorem 2.16, $X = X \setminus \operatorname{V}(f_{\lambda_1},\cdots,f_{\lambda_n}) = X_{f_{\lambda_1}} \cup \cdots \cup X_{f_{\lambda_n}}$.
\end{proof}

\begin{remark}
    Question: What do the $X_f$ look like? Answer: $\operatorname{Spec}(R)$.
\end{remark}

\begin{remark}[Construction: Classical algebraic geometry]
    Geometry: Let $k$ be a field, and usually $k = \bbR$ or $\bbC$. \emph{$d$-dimensional affine space:} $\bbA^d_k = \bbA^d = k^d$. \par 
    Let $\underline a = (a_1,\cdots,a_d) \in \bbA^d$ and $S \subseteq k[\underline X] = k[X_1,\cdots,X_d]$. Define
    \[\operatorname{V}(S) := \{\underline a \in \bbA^d \mid f(\underline a) = 0,\fa f \in S\} =: \text{``zero locus of $S$''} \subseteq \bbA^d,\] 
    e.g., $\operatorname{V}(X^2+Y^2+Z^2-1) = \text{``unit sphere''} \subseteq \bbA^3_\bbR = \bbR^3$. \par 
    Zariski topology on $\bbA^d$. Closed sets: $\operatorname{V}(S) = \operatorname{V}(\langle S \rangle) \subseteq \bbA^d$ with $S \subseteq k[\underline X]$. Open sets: $\bbA^d \setminus \operatorname{V}(S)$ with $S \subseteq k[\underline X]$. Basic open sets: $\bbA^d \setminus \operatorname{V}(f)$ with $f \in k[\underline X]$. \par 
    Let $T \subseteq k[\underline X]$ be fixed. Zariski topology on $\operatorname{V}(T)$. Closed sets: $\operatorname{V}(S) \cap \operatorname{V}(T)$ with $S \subseteq k[\underline X]$. Open sets: $(\smallunderbrace{\bbA^d \setminus \operatorname{V}(S)}_{\text{open in $\bbA^d$}}) \cap \operatorname{V}(T)$ with $S \subseteq k[\underline X]$.  Basic open sets: $(\bbA^d \setminus \operatorname{V}(f)) \cap \operatorname{V}(T)$ with $f \in k[\underline X]$. \par 
    We have 
    \begin{align*}
        \varphi: \bbA^d &\hookrightarrow \operatorname{m-Spec}(k[\underline X]) \subseteq \operatorname{Spec}(k[\underline X]) \\
        \underline a &\mapsto (X_1-a_1,\cdots,X_d-a_d) = \ker(\operatorname{eval}_{\underline a}), 
    \end{align*}
    where $\operatorname{eval}_{\underline a}: k[\underline X] \twoheadrightarrow k$ given by $f \mapsto f(\underline a)$. \par 
    Hilbert's Nullstellensatz: If $k = \overline k$, then $\operatorname{V}(\ffb) \neq \emptyset$ for any $\ffb \lneq k[\underline X]$. Let $\ffm \in \operatorname{m-Spec}(k[\underline X])$. Then $\ffm \lneq k[\underline X]$ and so $\operatorname{V}(\ffm) \neq \emptyset$. So there exists $\underline a \in \operatorname{V}(\ffm)$ such that $f(\underline a) = 0$ for $f \in \ffm \subseteq k[\underline X]$. Hence $\ffm \subseteq \ker(\operatorname{eval}_{\underline a}) = (X_1-a_1,\cdots,X_d-a_d)$. Also, since $\ffm \leq k[\underline X]$ is maximal, $\ffm = (X_1-a_1,\cdots,X_d-a_d)$. Thus, the above map $\varphi$ is onto. \par 
    Grothenick: there exists more geometric data in $\operatorname{Spec}(k[\underline X])$. \par 
    Let $V = \operatorname{V}(T) = \operatorname{V}(\ffb)$, where $\ffb = \langle T \rangle \leq k[\underline X]$. Then
    \[\operatorname{rad}(\ffb) \leq \operatorname{I}(V) := \{f \in k[\underline X] \mid f(\underline a) = 0,\fa \underline a \in V\} = \text{``vanishing ideal of $V$''} \leq k[\underline X].\]
    \par Hilbert Nullstellensatz: If $k = \overline k$, then $\operatorname{rad}(\ffb) = \operatorname{I}(V)$. \par
    \emph{Coordinate ring of $V$}: $k[V] = k[\underline X]/\operatorname{I}(V)$, also known as \emph{ring of regular functions on $V$}. \par 
    For $i = 1,\cdots,d$, $\overbar X_i \in k[\underline X]/\operatorname{I}(V)$ and $\overbar X_i(\underline a) = \underline a_i$,$i^{\text{th}}$ coordinate function. Let 
    \begin{align*}
        k[V] = k[\underline X]/\operatorname{I}(V) \ni \overbar f \longsquiggly \overbar f: V &\to k  \\
        \underline a &\mapsto f(\underline a). 
    \end{align*}
    Let $\overbar f = \overbar g$. Then $f-g \in \operatorname{I}(V)$. So $f(\underline a)-g(\underline a) = (f-g)(\underline a) = 0$ for any $\underline a \in V$, i.e., $f(\underline a) = g(\underline a)$. Hence it is well-defined. We have 
    \begin{align*}
        \overbar \varphi: V &\hookrightarrow \operatorname{m-Spec}(k[V]) \subseteq \operatorname{Spec}(k[V]) \\
        \underline a &\mapsto \frac{(X_1-a_1,\cdots,X_d-a_d)}{\operatorname{I}(V)}. 
    \end{align*}
    \par Hilbert Nullstellensatz: If $k = \overbar k$, then similarly, $\overbar \varphi$ is onto. \par 
    Grothenick: there exists more geometric data in $\operatorname{Spec}(k[V])$. 
\end{remark}

\noindent Set up: $R \ni f$, $X = \operatorname{Spec}(R) \supseteq X_f = X \setminus \operatorname{V}(f) = \{\ffp \in \operatorname{Spec}(R) \mid f \not \in \ffp\}$.

\begin{recall*}
    Let $S = \{1,f,f^2,\cdots\}$. We have the localization
    $R_f = S^{-1}R = \{\frac{r}{f^n} \mid r \in R, n \geq 0\}$.
\end{recall*}

\begin{proposition}
    Let $\varphi: R \to R_f$ be given by $\varphi(g) = \frac{g}{1}$ and $\varphi^*: \operatorname{Sepc}(R_f) \to \operatorname{Spec}(R) = X$ be given by $\varphi^*(\ffp) = \varphi^{-1}(\ffp)$.
    \begin{enumerate}
        \item $\varphi^*(\ffp) \in X_f$ for any $\ffp \in \operatorname{Spec}(R_f)$. 
        \item Restrict codomain, the induced map $\varphi_f^*: \operatorname{Spec}(R_f) \to X_f$ is 1-1 and onto.
    \end{enumerate}
    Slogan: $\operatorname{Spec}(R_f) = X_f$ ``open affine subsets''.
\end{proposition}

\begin{proof}
    \begin{enumerate}
        \item Let $\ffp \in \operatorname{Sepc}(R_f)$. We've seen $\varphi^*(\ffp) = \varphi^{-1}(\ffp) \in \operatorname{Spec}(R)$ through Fact 1.16. Note $f \not \in \varphi^{-1}(\ffp) = \varphi^*(\ffp)$, otherwise, $R_f^\times \ni \frac{f}{1} = \varphi(f) \in \varphi(\varphi^{-1}(\ffp) \subseteq \ffp \in \operatorname{Spec}(R_f)$, a contradiction. 
        \item 
            Let $\ffp \in X_f$. Then $\ffp_f := \ffp R_f = \{\frac{x}{f^n} \mid x \in \ffp, n \geq 0\} \leq R_f$. Since $1 \not \in \ffp$, $\frac{1}{1} \not \in \ffp_f$ and then $\ffp_f \lneq R_f$. Let $\frac{x}{f^n},\frac{y}{f^m} \in R_f$ with $x,y \in R$ and $n,m \geq 0$ such that $\frac{xy}{f^{n+m}} = \frac{x}{f^n} \frac{y}{f^m} \in \ffp_f$ and so $xy \in \ffp$. Since $\ffp \in \operatorname{Spec}(R)$, $x \in \ffp$ or $y \in \ffp$. So $\frac{x}{f^n} \in \ffp_f$ or $\frac{y}{f^m} \in \ffp_f$. Hence $\ffp_f \in \operatorname{Spec}(R_f)$. Note $\frac{x}{1} = \varphi(x) \in \ffp_f$ if and only if $x \in \ffp$. So $\varphi_f^*(\ffp_f) = \varphi^{-1}(\ffp_f) = \ffp$. Thus, $\varphi_f^*$ is onto. \par 
            Let $\ffp, \ffq \in \operatorname{Spec}(R_f)$ such that $\varphi^{-1}(\ffp) = \varphi^*_f(\ffp) = \varphi_f^*(\ffq) = \varphi^{-1}(\ffq)$. Let $\frac{x}{f^n} \in \ffp$ with $x \in \ffp$ and $n \geq 0$. Then $\varphi(x) = \frac{x}{1} \in \ffp$ and so $x \in \varphi^{-1}(\ffp) = \varphi^{-1}(\ffq)$. So $\frac{x}{1} = \varphi(x) \in \ffq$ and then $\frac{x}{f^n} \in \ffq$. Hence $\ffp \subseteq \ffq$. By symmetry, $\ffq \subseteq \ffp$. Thus, $\varphi_f^*$ is 1-1.
    \end{enumerate}
    Or use prime avoidence under localization directly. 
    \begin{align*}
        X_f = \{\ffp \in \operatorname{Spec}(R) \mid f \not \in \ffp\} & \rightleftarrows \operatorname{Spec}(R_f) \\
        \ffp &\mapsto \ffp_f \\ 
        \varphi^*(\ffp) = \varphi^{-1}(\ffp) = \text{``$\ffp \cap R$''} &\mapsfrom \ffp. \qedhere
    \end{align*}


\end{proof}

\section*{Subspaces}
\addcontentsline{toc}{section}{Subspaces}

\begin{proposition}
    Let $X$ be a topological space with a topology $\ssT$ and $Y \subseteq X$. Define $\ssT_Y = \{U \cap Y \mid U \in \ssT\}$. Then $\ssT_Y$ is a topology on $Y$, called the \emph{subspace topology}.
\end{proposition}

\begin{proof}
    $Y = X \cap Y \in \ssT_Y$ since $X \subseteq X$ is open. $\emptyset = \emptyset \cap Y  \in \ssT_y$ since $\emptyset \subseteq X$ is open. Let $\{U_\lambda \cap Y \mid U_\lambda \in \ssT\}_{\lambda \in \Lambda} \subseteq \ssT_Y$. Since $\ssT$ is a topology on $X$, $\bigcup_{\lambda \in \Lambda} U_\lambda \subseteq \ssT$. So $\bigcup_{\lambda \in \Lambda} (U_\lambda \cap Y) = (\bigcup_{\lambda \in \Lambda}U_\lambda) \cap Y \in \ssT_Y$. Let $U_1 \cap Y,\cdots,U_n \cap Y \in \ssT_Y$. Similarly, we have $\bigcap_{i=1}^n (U_\lambda \cap Y) \in \ssT_Y$. 
\end{proof}

\begin{remark}
    The closed subsets of $Y$ are $V \cap Y$, where $V \subseteq X$ is closed since 
    \begin{align*}
        \{Y \setminus (U \cap Y) \mid U \in \ssT\} &= \{Y \cap (U \cap Y)^c \mid U \in \ssT\} = \{(U^c \cup Y^c) \cap Y \mid U \in \ssT\} \\
                                                   &= \{(U^c \cap Y) \cup (Y^c \cap Y) \mid U \in \ssT\} = \{U^c \cap Y \mid U \in \ssT\}.
    \end{align*}
\end{remark}

\begin{proposition}
    If $\llB$ is a basis for $\ssT$, then $\llB_Y = \{\llB \cap Y \mid B \in \llB\}$ is a basis for $\ssT_Y$.
\end{proposition}

\begin{proof}
    Let $U \cap Y$ with $U \in \ssT$ be an open set in $\ssT_Y$. Since $\llB$ is a basis of $\ssT$, $U = \bigcup_{\lambda \in \Lambda_U} B_\lambda$ for some $\{B_\lambda\}_{\lambda \in \Lambda_U} \subseteq \llB$. So $U \cap Y = \bigcup_{\lambda \in \Lambda_U} (B_\lambda \cap Y)$. 
\end{proof}

\begin{corollary}
    Subspace topology on $X_f \subseteq X = \operatorname{Spec}(R)$ has 
    \begin{enumerate}
        \item closed sets: $\{\operatorname{V}(\ffa) \cap X_f \mid \ffa \leq R\}$,
        \item open sets: $\{(X \setminus \operatorname{V}(\ffa))\cap X_f \mid \ffa \leq R\}$,
        \item basic open sets: $\{X_g \cap X_f = X_{fg} \mid g \in R\}$.
    \end{enumerate}
\end{corollary}

\begin{proposition}
    Let $\ffa \leq R$, $\varphi: R \to R_f$ and $\varphi_f^*: \operatorname{Spec}(R_f) =: Z \to X_f$ as in Proposition 2.20. 
    \begin{enumerate}
        \item 
            $(\varphi_f^*)^{-1}(\operatorname{V}(\ffa) \cap X_f) = \operatorname{V}(\ffa_f)$. 
        \item
            $(\varphi_f^*)^{-1}((X \setminus \operatorname{V}(\ffa)) \cap X_f) = \operatorname{Spec}(R_f) \setminus \operatorname{V}(\ffa_f)$.
        \item 
            $(\varphi_f^*)^{-1}(X_g \cap X_f) = Z_{g|1}$ for $g \in R$.
    \end{enumerate}
\end{proposition}

\begin{proof}
    \begin{enumerate}
        \item Let $\ffp \in \operatorname{Spec}(R_f)$. $\ffp \in (\varphi_f^*)^{-1}(\operatorname{V}(\ffa) \cap X_f)$ if and only if $\varphi^{-1}(\ffp) = \varphi_f^*(\ffp) \in \operatorname{V}(\ffa) \cap X_f$ if and only if $\varphi^{-1}(\ffp) \in \operatorname{V}(\ffa)$ if and only if $\ffa \subseteq \varphi^{-1}(\ffp)$ if and only if $\ffa_f = \ffa R_f \subseteq \varphi^{-1}(\ffp)R_f = \ffp$ \footnote[2]{Let $\varphi_f^*(\ffp) = \varphi^{-1}(\ffp) =: \ffq \in X_f$. By the proof of Proposition 2.20(a), $\varphi_f^*(\ffq_f) = \ffq$. Also, since $\varphi_f^*$ is 1-1, $\varphi^{-1}(\ffp) R_f = \ffq R_f = \ffq_f = \ffp$.} if and only if $\ffp \in \operatorname{V}(\ffa_f)$.
        \item Let $\ffp \in \operatorname{Spec}(R_f)$. $\ffp \in (\varphi_f^*)^{-1}((X \setminus \operatorname{V}(\ffa)) \cap X_f)$ if and only if $\varphi^{-1}(\ffp) = \varphi_f^*(\ffp) \in (X \setminus \operatorname{V}(\ffa)) \cap X_f$ if and only if $\varphi^{-1}(\ffp) \in X \setminus \operatorname{V}(\ffa)$ if and only if $\ffp \in \operatorname{Spec}(R_f) \setminus \operatorname{V}(\ffa_f)$ by the proof of (a).
        \item Method 1. By (a), we have $(\varphi^*_f)^{-1}(X_g \cap X_f) = (\varphi^*_f)^{-1}((X \setminus \operatorname{V}(g)) \cap X_f) = \operatorname{Spec}(R_f) \setminus V((g)_f) = \{\ffp_f \mid \ffp \in \operatorname{Spec}(R), \ffp_f \not \supseteq (g)_f\} = \{\ffp_f \mid g \not \in \ffp \in \operatorname{Spec}(R)\} = \{\ffp_f \mid \ffp \in X_g\}$. \par 
            Method 2. Let $\ffp \in \operatorname{Spec}(R_f)$. Then $\ffp \in (\varphi_f^*)^{-1}(X_g \cap X_f)$ if and only if $\varphi_f^*(\ffp) \in X_g \cap X_f$ if and only if $\varphi_f^*(\ffp) \in X_g$ if and only if $\ffp \in \{\ffq_f \mid \ffq \in X_g\}$.
    \end{enumerate}
\end{proof}

\section*{Continuous functions and homeomorphisms}
\addcontentsline{toc}{section}{Continuous functions and homeomorphisms}

Let $X \neq \emptyset$ be a topological space. 

\begin{definition}
    Let $f: X \to Y$ be a function between topological spaces. Then $f$ is \emph{continuous} if for any $U \in \ssT_Y$, $f^{-1}(U) \in \ssT_x$. \par 
    ``Inverse image of arbitrary open set in $Y$ is open in $X$''. 
\end{definition}

\begin{fact}
    To show $f$ is continuous, it is equivalent to show $f^{-1}(\text{arbitrary closed sets of $Y$})$ is closed in $X$, equivalent to showing $f^{-1}(\text{basic open subsets of $Y$})$ is open in $X$.
\end{fact}

\begin{theorem}
    Let $f \in R$, $\varphi: R \to R_f$ and $\varphi^*: \operatorname{Spec}(R_f) \to \operatorname{Spec}(R)$. Then  $\varphi^*(\operatorname{Spec}(R_f)) \subseteq X_f$ ``principal topology''. Restrict codomain, $\varphi_f^*: \operatorname{Spec}(R_f) \to X_f$ is 1-1 and onto. Moreover, $\varphi_f^*$ and $(\varphi_f^*)^{-1}$ is continuous. 
\end{theorem}

\begin{proof}
    By Proposition 2.24, we have $\varphi_f^*$ is continuous or by Lemma 2.30. \par 
    Need to show $(\varphi_f^*)^{-1}$ is continuous. Claim. For any $I \leq R_f$, if $\ffa = \varphi^{-1}(I) \leq R$, then $\ffa_f = \ffa R_f = I$. ``$\subseteq$''. $\ffa_f = \varphi^{-1}(I)R_f \subseteq I$ by 1.68?. ``$\supseteq$''. $i \in I \subseteq R_f$, $i = \frac{r}{f^n} \in R$. $\varphi(r) = \frac{r}{1} = r\frac{r}{f^n} \in I $. So $r \in \varphi^{-1}(I) = \ffa$. Then $\frac{r}{1} \in \ffa R_f$. So $\frac{r}{f^n} = \frac{1}{f^n} \frac{r}{1} \in R_f$. \par 
    Need to show $\smallunderbrace{((\varphi_f^*)^{-1})^{-1}}_{R_f^*}(\smallunderbrace{\text{closed}}_{\subseteq \operatorname{Spec}(R_f)}$) is closed. Need to show for any $I \leq R_f$: $\varphi_f^*(\operatorname{V}(\ffa R_f)) = \varphi_f^*(\operatorname{V}(I))$ is closed. Need to show $\varphi_f^*(\operatorname{V}(\ffa R_f)) = \operatorname{V}(\ffa) \cap X_f$, which follows from prime correspondence.
\end{proof}

\begin{example}
    Let $k$ be a field and $R = k\llbracket X \rrbracket$. Fact: $\operatorname{Spec}(R) = \{0,\langle X \rangle\}$. Let $R \xrightarrow \varphi S = k \times Q(R)$ given by $\sum_{i=1}^{\text{finite}} a_iX^i \mapsto (a_0,\frac{\sum_{i=1}^{\text{finite}} a_iX^i}{1})$. $\operatorname{Spec}(S) = \{0 \times Q(R), k \times 0\}$. $\varphi^*: \operatorname{Spec}(S) \to \operatorname{Spec}(R)$. graph. However, the inverse $(\varphi^*)^{-1}$ is not continuous. Closed ses of $\operatorname{Spec}(R)$ are $\operatorname{V}(1) = R$, $\operatorname{V}(0) = \operatorname{Spec}(R)$ and $\operatorname{V}(X) = \{\langle X \rangle\}$. Closed sets of $\operatorname{Spec}(S)$ are $\operatorname{V}(1,1) = \emptyset, \operatorname{V}(0,0) = \operatorname{Spec}(S)$, $\operatorname{V}(0,1) = \{0 \times Q(R)\}$ and $\operatorname{V}(1,0) = \{k \times 0\}$. $((\varphi_f^*)^{-1})^{-1}$ (closed) not closed? $\varphi^*(\{k \times 0\}) = \{0\}$ not closed.
\end{example}

\begin{corollary}
    $X_f$ is quasi-compact.
\end{corollary}

\begin{proof}
    It follows from $X_f$ is homeomorphic to $\operatorname{Spec}(R_f)$.
\end{proof}

\begin{example}
    $U \subseteq \operatorname{Spec}(R) = X$ may not be quasi-compact. Let $R = k[X_1,X_2,X_3,\cdots]$. Let $U = X \setminus \operatorname{V}(X_1,X_2,X_3,\cdots) = \bigcup_{i=1}^\infty (X \setminus \operatorname{V}(X_i)) \neq \bigcup_{i=1}^n (X \setminus \operatorname{V}(X_i)) = X \setminus \operatorname{V}(X_1,\cdots,X_n)$. Need to show $\operatorname{V}(X_1,X_2,X_3,\cdots) \neq \operatorname{V}(X_1,X_2,\cdots,X_n)$. ``$\subseteq$''. It is clear. ``$\not \supseteq$''. Let $\ffp = \langle X_1,\cdots,X_n \rangle \in \operatorname{V}(X_1,\cdots,X_n)$, but $\ffp \not \in \operatorname{V}(X_1,X_2,\cdots)$.
\end{example}

\begin{fact}
    If $R$ is noetherian and $U \subseteq X = \operatorname{Spec}(R)$ is open, then $U$ is quasi-compact. 
\end{fact}

\begin{proof}
    Let $U = \bigcup_{\lambda \in \Lambda}U_\lambda$. Since $U_\lambda$ is open in $U$, $U_\lambda = U \cap \bigcup_{\lambda \in \Lambda}U_\lambda$ is an open cover,... open $\subseteq \widetilde U_\lambda \subseteq X$. So $U_\lambda = \widetilde U_\lambda \cap U$ is open. Use the fact that $X_f$'s form a basis to assume without losss of generality $U_\lambda = X_{f_\lambda}$ for some $f_\lambda \in R$. \par 
    $U = U_{\lambda \in \Lambda} X_{f_\lambda} = U_\lambda (X \setminus \operatorname{V}(f_\lambda)) = X \setminus \operatorname{V}(\langle f_\lambda \mid \lambda \in \Lambda \rangle)$..... \par 
\end{proof}

\begin{lemma}
    Let $f: X \to Y$ be a continuous function between two topological spaces. if $f(X) \subseteq Z \subseteq Y$, then restrict the codomain, $f_Z: X \to Z$ and gives $Z$ the subspace topology, then $f_Z$ is continuous.
\end{lemma}

\begin{proof}
    If $U \subseteq Z$ is open, then $U = Z \cap \widetilde U$ for some $\widetilde U \subseteq Y$ open. $f(X) \subseteq Z$. So $f_Z^{-1}(U) = f^{-1}(Z \cap \widetilde U) = f^{-1}(\widetilde U)$ open in $X$ since $f$ is continuous.
\end{proof}

\begin{theorem}
    Let...
    \begin{enumerate}
        \item
        \item 
    \end{enumerate}
\end{theorem}

\begin{corollary}
    \begin{enumerate}
        \item 
        \item 
        \item 
        \item 
    \end{enumerate}
\end{corollary}

\begin{definition}
    $X$ is \emph{irreducible} if for any pair of open subsets $U_1,U_2 \subseteq X$, if $U_1,U_1 \neq \emptyset$, then $U_1 \cup U_2 \neq \emptyset$.
\end{definition}

\begin{example}
    If $R$ is an integral domain, then $X = \operatorname{Spec}(R)$ is irreducible.
\end{example}

\begin{definition}[2.33+]
    A subset $Y \subseteq X$ with subspace topology is an irreducible subset if it is reduced as topological space.
\end{definition}

\begin{corollary}
    If $\ffq \subset \operatorname{Spec}(R)$, then $\operatorname{V}(\ffq) \subseteq \operatorname{Spec}(R)$ is irreducible.
\end{corollary}

\begin{proof}

\end{proof}

\begin{definition}
    Let $Y \subseteq X$. The \emph{closure} of $X$ of $Y$ in $X$ is 
    \[\overbar Y = \bigcap_{\substack{Y \subseteq V \subseteq X \\ V \text{ closed}}}V.\]
\end{definition}

\begin{fact}
    If $Y \subseteq X$, then $\overbar Y$ is the (unique) smallest closed subset of $X$ containing $Y$. If $V \subseteq X$ is closed, then $\overbar Y \subseteq V$ if and only if $Y \subseteq V$.
\end{fact}

\begin{example*}
    Let $X = \operatorname{Spec}(\bbZ)$. Zariski topology is almost the ``cofinite topology''.  Open sets are $X,\emptyset, \{X \setminus \{p_1,\cdots,p_n\} \mid n \geq 1, p_i \neq 0,\fa i = 1,\cdots,n\}$.
\end{example*}

\begin{lemma}
    The followings are equivalent.
    \begin{enumerate}
        \item $X$ is irreducible.
        \item For any closed sets $V_1,V_2 \subsetneq V$, $V_1 \cup U_2 \subsetneq V$.
        \item For any open set $U \subseteq X$, if $U \neq \emptyset$, then $\overbar U = X$. \par 
            ``Nonempty open sets are dense''.
    \end{enumerate}
\end{lemma}

\begin{proof}

\end{proof}

\begin{lemma}
    $X$ is irreducible if and only if for any closed sets $V_1,V_2 \subsetneq X$, $V_1 \cup V_2 \neq X$.
\end{lemma}

\begin{proposition}
    $X = \operatorname{Spec}(R)$ is irreducible if and only if $\operatorname{Nil}(R) \subseteq \operatorname{Spec}(R)$. 
\end{proposition}

\begin{proof}

\end{proof}

\begin{proposition}
    \begin{enumerate}
        \item If $Y \subseteq X$ is irreducible, then $\overbar Y \subseteq X$ is irreducible.
        \item If $\ssC$ is a chain of irreducible subsets of $X$, then $\bigcup_{Y \in \ssC}Y$ is irreducible.
        \item For any irreducible $Y \subseteq X$, there exists a maximal irreducible subseteq $Z \subseteq X$ such that $Y \subseteq Z$.
        \item $X$ is the union of its maximal irreducible subsets.
    \end{enumerate}
\end{proposition}

\begin{proof}
    \begin{enumerate}
        \item Let $Y \subseteq X$ is irreducible. Let $V_1,V_2 \subseteq \overbar Y$ be both closed. Assume $\overbar Y = V_1 \cup V_2$. Need to show $\overbar Y = V_1$ or $Y = V_2$. Let $i \in \{1,2\}$. Since $V_i$ is closed in $\overbar Y$, there exists $\widetilde V_i \subseteq X$ closed in $X$ such that $V_i = \overbar Y \cap \widetilde V_i$ closed in $Y$. Set $V_i' = \widetilde V_i \cap Y = (\widetilde V_i \cap \overbar Y) \cap Y = V_i \cap Y$. Then $\overbar Y = V_1 \cup V_2 = (\widetilde V_1 \cap \bar Y) \cup (\widetilde V_2 \cap \overbar Y) = (\widetilde V_1 \cup \widetilde V_2) \cap \overbar Y$. So $\widetilde V_1 \cup \widetilde V_2 \supseteq \overbar Y \supseteq Y$. Hence $Y = V_1 \cup V_2$....
        \item 
        \item 
        \item 
    \end{enumerate}
\end{proof}

\begin{definition}
    The maximal irreducible subsets of $X$ are the \emph{irreducible components} of $R$.
\end{definition}

\begin{proposition}
    \begin{enumerate}
        \item If $V \subseteq X = \operatorname{Spec}(R)$ closed, then $V$ is irreducible if and only if $V = \operatorname{V}(\ffp)$ for some $\ffp \in \operatorname{Spec}(R)$.
        \item The irreducible components of $X = \operatorname{Spec}(R)$ are the subsets $\operatorname{V}(\ffp)$ such that $\ffp \in \operatorname{Min}(R) = \operatorname{Min}(\operatorname{Spec}(R))$.
    \end{enumerate}
\end{proposition}

\begin{example}

\end{example}

\begin{corollary}
    $R$ has a minimal prime, i.e., $\operatorname{Min}(\operatorname{Spec}(R)) \neq \emptyset$.
\end{corollary}

\begin{proof}

\end{proof}



